{"version":3,"sources":["../lib/Catalog.jsx"],"names":["Catalog","props","scrollToSelect","window","scrollTo","node","offsetTop","document","body","offsetHeight","isActive","index","nextNode","current","precent","next","cataLogScroll","state","catalog","onscroll","setState","cataLog","id","cur","getElementById","win","console","log","fontSize","fontWeight","map","item","bind","type","text","Component"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;;;;;;;IACqBA,O;;;AACnB,mBAAYC,KAAZ,EAAmB;AAAA;;AAAA,kHACXA,KADW;;AAAA,UAYnBC,cAZmB,GAYF,gBAAQ;AACvBC,aAAOC,QAAP,CAAgB,CAAhB,EAAmBC,QAAQA,KAAKC,SAAL,GAAiBC,SAASC,IAAT,CAAcC,YAA/B,GAA8C,EAAzE;AACD,KAdkB;;AAAA,UAuBnBC,QAvBmB,GAuBR,UAACC,KAAD,EAAQN,IAAR,EAAcO,QAAd,EAA2B;AAAA,UAC5BC,OAD4B,GAChB,MAAKZ,KADW,CAC5BY,OAD4B;;AAEpC,UAAIR,QAAQO,QAAZ,EAAsB;AACpB,YAAIE,UAAUT,KAAKC,SAAL,GAAiBC,SAASC,IAAT,CAAcC,YAA/B,GAA8C,EAA5D;AACA,YAAIM,OAAOH,SAASN,SAAT,GAAqBC,SAASC,IAAT,CAAcC,YAAnC,GAAkD,EAA7D;AACA,YAAIE,UAAU,CAAV,IAAeE,WAAWC,OAA9B,EAAuC;AACrC,iBAAO,IAAP;AACD,SAFD,MAEO,IAAIA,WAAWD,OAAX,IAAsBE,OAAOF,OAAjC,EAA0C;AAC/C,gBAAKG,aAAL,CAAmBL,KAAnB;AACA,iBAAO,IAAP;AACD;AACF;AACD,aAAO,KAAP;AACD,KApCkB;;AAEjB,UAAKM,KAAL,GAAW;AACTC,eAAQ;AADC,KAAX;AAGAf,WAAOgB,QAAP,GAAgB,YAAI;AAClB,YAAKC,QAAL,CAAc,EAAEP,SAAS,0BAAX,EAAd;AACD,KAFD;AALiB;AAQlB;;;;wCACkB;AACjB,WAAKO,QAAL,CAAc,EAACC,SAAQ,uBAAW,KAAKpB,KAAL,CAAWiB,OAAtB,CAAT,EAAd;AACD;;;kCAIaP,K,EAAO;AACnB,UAAIW,KAAK,oBAAoBX,KAA7B;AACA,UAAIY,MAAMhB,SAASiB,cAAT,CAAwBF,EAAxB,CAAV;AACA,UAAIG,MAAMlB,SAASiB,cAAT,CAAwB,qBAAxB,CAAV;AACA,UAAID,GAAJ,EAAS;AACPE,YAAIrB,QAAJ,CAAa,CAAb,EAAgBmB,IAAIjB,SAAJ,GAAgB,EAAhC;AACD;AACF;;;6BAeO;AAAA;;AACNoB,cAAQC,GAAR,CAAY,OAAZ,EAAoB,KAAK1B,KAAzB;AACA,aAAO;AAAA;AAAA;AACH;AAAA;AAAA,YAAK,OAAO,EAAE2B,UAAU,MAAZ,EAAoBC,YAAY,GAAhC,EAAZ;AAAA;AAAA,SADG;AAGF,aAAKZ,KAAL,CAAWI,OAAX,IAAoB,KAAKJ,KAAL,CAAWI,OAAX,CAAmBS,GAAnB,CAAuB,UAACC,IAAD,EAAOpB,KAAP;AAAA,iBAC1C;AAAA;AAAA,cAAI,KAAKA,KAAT;AACE;AAAA;AAAA;AACE,0BAAU,OAAKD,QAAL,CAAcsB,IAAd,CACR,MADQ,EAERrB,KAFQ,EAGRoB,KAAK1B,IAHG,EAIR0B,KAAKnB,QAJG,CADZ;AAOE,2BAAW,qBAAqBmB,KAAKE,IAPvC;AAQE,oBAAI,oBAAoBtB,KAR1B;AASE,iCAAiB,QATnB;;AAWE,yBAAS,OAAKT,cAAL,CAAoB8B,IAApB,CAAyB,MAAzB,EAA+BD,KAAK1B,IAApC;AAXX;AAaG0B,mBAAKG;AAbR;AADF,WAD0C;AAAA,SAAvB;AAHlB,OAAP;AAuBD;;;;EA/DkCC,gB;;kBAAhBnC,O","file":"Catalog.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { getCataLog, getScrollTop } from \"./utils\";\r\nimport { NavLink } from \"react-router-dom\";\r\nexport default class Catalog extends Component{\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n      catalog:[],\r\n    }\r\n    window.onscroll=()=>{\r\n      this.setState({ current: getScrollTop() });\r\n    }\r\n  }\r\n  componentDidMount(){\r\n    this.setState({cataLog:getCataLog(this.props.catalog)});\r\n  }\r\n  scrollToSelect = node => {\r\n    window.scrollTo(0, node && node.offsetTop + document.body.offsetHeight - 20);\r\n  };\r\n  cataLogScroll(index) {\r\n    let id = 'catalog-default' + index;\r\n    let cur = document.getElementById(id);\r\n    let win = document.getElementById('detail-card-catalog');\r\n    if (cur) {\r\n      win.scrollTo(0, cur.offsetTop - 68);\r\n    }\r\n  }\r\n  isActive = (index, node, nextNode) => {\r\n    const { current } = this.props;\r\n    if (node && nextNode) {\r\n      let precent = node.offsetTop + document.body.offsetHeight - 20;\r\n      let next = nextNode.offsetTop + document.body.offsetHeight - 20;\r\n      if (index === 0 && current <= precent) {\r\n        return true;\r\n      } else if (precent <= current && next > current) {\r\n        this.cataLogScroll(index);\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n  render(){\r\n    console.log('props',this.props);\r\n    return <div>\r\n        <div style={{ fontSize: \"16px\", fontWeight: 700 }}>目录</div>\r\n        {/* <span style={{ fontWeight: 700 }}>{content.title}</span> */}\r\n        {this.state.cataLog&&this.state.cataLog.map((item, index) => (\r\n          <li key={index}>\r\n            <a\r\n              isActive={this.isActive.bind(\r\n                this,\r\n                index,\r\n                item.node,\r\n                item.nextNode\r\n              )}\r\n              className={\"catalog-default \" + item.type}\r\n              id={\"catalog-default\" + index}\r\n              activeClassName={\"active\"}\r\n             \r\n              onClick={this.scrollToSelect.bind(this, item.node)}\r\n            >\r\n              {item.text}\r\n            </a>\r\n          </li>\r\n        ))}\r\n      </div>;\r\n  }\r\n}\r\n"]}